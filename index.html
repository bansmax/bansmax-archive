<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAnsMax Archive - Win98 Edition (Full Screen)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tahoma:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Windows 98 Inspired Styles */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; 
        }
        body {
            background-color: #008080; /* Default Teal Desktop */
            font-family: 'Tahoma', sans-serif;
            font-size: 12px;
            color: #000000;
            display: flex; 
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease; /* Smooth transition for desktop bg */
        }

        .main-app-container {
            width: 98vw; 
            height: 95vh; 
            max-width: none; 
            margin: 0; 
            display: flex; 
            flex-direction: column;
        }

        .win98-window {
            background-color: #C0C0C0; /* Default Scheme BG */
            border-top: 2px solid #FFFFFF;
            border-left: 2px solid #FFFFFF;
            border-right: 2px solid #000000;
            border-bottom: 2px solid #000000;
            box-shadow: 1px 1px 0 #000000, 2px 2px 0 #000000;
            padding: 0;
            margin-bottom: 0; 
            display: flex; 
            flex-direction: column; 
            flex-grow: 1; 
            overflow: hidden; 
        }

        .win98-title-bar {
            background-color: #000080; /* Default Scheme Title BG */
            color: #FFFFFF;
            padding: 3px 5px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            cursor: default;
            flex-shrink: 0; 
        }
        .win98-title-bar-text {
            margin-left: 4px;
        }
        .win98-title-bar-icon {
            width: 16px;
            height: 16px;
            margin-right: 4px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect x='1' y='1' width='14' height='14' fill='%23C0C0C0' stroke='%23000080' stroke-width='1'/%3E%3Crect x='3' y='8' width='10' height='6' fill='%23FFFFFF' stroke='%23000080' stroke-width='0.5'/%3E%3Crect x='5' y='1' width='6' height='5' fill='%23A0A0A0'/%3E%3Cpath d='M3 5H13V7H3Z' fill='%23808080'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }
        .win98-title-bar-controls span {
            background-color: #C0C0C0;
            border: 1px outset #FFFFFF;
            color: #000000;
            padding: 0px 4px;
            margin-left: 2px;
            font-family: 'Marlett', 'Arial', sans-serif;
            font-size: 10px;
            min-width: 18px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: default;
            line-height: 1;
        }
         .win98-title-bar-controls span:active {
            border-style: inset;
        }

        /* --- Window Color Schemes --- */
        .win98-window.win98-scheme-marine { background-color: #ADD8E6; }
        .win98-window.win98-scheme-marine .win98-title-bar { background-color: #0000CD; }
        .win98-window.win98-scheme-marine .win98-title-bar-icon {
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect x='1' y='1' width='14' height='14' fill='%23ADD8E6' stroke='%230000CD' stroke-width='1'/%3E%3Crect x='4' y='4' width='8' height='8' fill='%230000CD'/%3E%3C/svg%3E");
        }
        .win98-window.win98-scheme-olive { background-color: #BDB76B; }
        .win98-window.win98-scheme-olive .win98-title-bar { background-color: #556B2F; }
         .win98-window.win98-scheme-olive .win98-title-bar-icon {
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect x='1' y='1' width='14' height='14' fill='%23BDB76B' stroke='%23556B2F' stroke-width='1'/%3E%3Crect x='4' y='4' width='8' height='8' fill='%23556B2F'/%3E%3C/svg%3E");
        }
        .win98-window.win98-scheme-spruce { background-color: #8FBC8F; }
        .win98-window.win98-scheme-spruce .win98-title-bar { background-color: #2F4F4F; }
        .win98-window.win98-scheme-spruce .win98-title-bar-icon {
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect x='1' y='1' width='14' height='14' fill='%238FBC8F' stroke='%232F4F4F' stroke-width='1'/%3E%3Crect x='4' y='4' width='8' height='8' fill='%232F4F4F'/%3E%3C/svg%3E");
        }
        
        .win98-window.win98-scheme-marine .win98-menu-bar, 
        .win98-window.win98-scheme-marine .win98-status-bar,
        .win98-window.win98-scheme-marine .win98-sidebar,
        .win98-window.win98-scheme-marine .menu-dropdown,
        .win98-window.win98-scheme-marine .generic-dialog-content { background-color: #ADD8E6; }

        .win98-window.win98-scheme-olive .win98-menu-bar, 
        .win98-window.win98-scheme-olive .win98-status-bar,
        .win98-window.win98-scheme-olive .win98-sidebar,
        .win98-window.win98-scheme-olive .menu-dropdown,
        .win98-window.win98-scheme-olive .generic-dialog-content { background-color: #BDB76B; }
        
        .win98-window.win98-scheme-spruce .win98-menu-bar, 
        .win98-window.win98-scheme-spruce .win98-status-bar,
        .win98-window.win98-scheme-spruce .win98-sidebar,
        .win98-window.win98-scheme-spruce .menu-dropdown,
        .win98-window.win98-scheme-spruce .generic-dialog-content { background-color: #8FBC8F; }


        .win98-menu-bar {
            background-color: #C0C0C0; 
            padding: 1px 2px; 
            border-bottom: 1px solid #808080;
            box-shadow: 0 1px 0 #FFFFFF;
            display: flex;
            flex-shrink: 0; 
            position: relative; 
            height: 21px; 
            align-items: center; 
        }
        .menu-item-container { 
            position: relative;
        }
        .menu-item-main { 
            padding: 2px 7px; 
            cursor: default;
            font-size: 11px;
            white-space: nowrap;
            height: 100%;
            display: flex;
            align-items: center;
        }
        .menu-item-main:hover, .menu-item-main.active {
            background-color: #000080;
            color: #FFFFFF;
        }
        .menu-dropdown {
            display: none; 
            position: absolute;
            top: 100%; 
            left: 0;
            background-color: #C0C0C0; 
            border: 1px outset #FFFFFF;
            box-shadow: 1px 1px 0 #000000, 2px 2px 0 #000000;
            padding: 2px; 
            z-index: 1100; 
            min-width: 150px; 
        }
        .menu-dropdown-item {
            padding: 2px 20px 2px 8px; 
            font-size: 11px;
            cursor: default;
            white-space: nowrap;
            display: block; 
        }
        .menu-dropdown-item:hover {
            background-color: #000080;
            color: #FFFFFF;
        }
        .menu-dropdown-separator {
            height: 1px;
            background-color: #808080;
            border-bottom: 1px solid #FFFFFF;
            margin: 3px 2px; 
        }
        .menu-search-container {
            margin-left: auto; 
            display: flex;
            align-items: center;
            padding-right: 3px; 
        }
        #menuSearchInput {
            height: 17px; 
            font-size: 10px;
            padding: 1px 3px;
            width: 150px; 
            border: 1px inset #808080; 
            background-color: #FFFFFF;
        }


        .win98-content-wrapper {
            display: flex;
            border-top: 2px solid #808080;
            flex-grow: 1; 
            overflow: hidden; 
        }

        .win98-sidebar {
            width: 220px;
            background-color: #C0C0C0; 
            padding: 8px;
            border-right: 2px solid #000000;
            box-shadow: 1px 0 0 #FFFFFF inset;
            flex-shrink: 0;
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
        }
        .sidebar-bottom-content {
            margin-top: auto; 
            padding-top: 15px; 
            text-align: center; 
        }


        .win98-main-content-area {
            flex-grow: 1;
            background-color: #FFFFFF;
            padding: 10px;
            border-left: 2px solid #FFFFFF;
            overflow-y: auto; 
        }

        .win98-button {
            background-color: #C0C0C0;
            border: 1px outset #FFFFFF;
            padding: 4px 10px;
            font-family: 'Tahoma', sans-serif;
            font-size: 12px;
            cursor: pointer;
            min-width: 75px;
            text-align: center;
        }
        .win98-button:active {
            border-style: inset;
            padding: 5px 9px 3px 11px;
        }
        .win98-button.primary {
            border-width: 2px;
            font-weight: bold;
        }
        .win98-button:focus {
            outline: 1px dotted #000000;
            outline-offset: -3px;
        }
        .win98-button.small { 
            font-size:10px; 
            padding: 2px 6px; 
            min-width: auto; 
            margin-top: 5px;
            margin-right: 5px;
        }

        .win98-input, .win98-textarea, .win98-select { 
            background-color: #FFFFFF;
            border: 1px inset #C0C0C0;
            border-top-color: #808080;
            border-left-color: #808080;
            border-bottom-color: #FFFFFF;
            border-right-color: #FFFFFF;
            padding: 3px 4px;
            font-family: 'Tahoma', sans-serif;
            font-size: 12px;
            box-sizing: border-box; 
        }
        .win98-textarea {
            min-height: 75px;
            width: 100%;
        }
         .win98-select { 
            height: 21px; 
        }

        .win98-outset-panel { 
            border: 1px solid #808080;
            border-right-color: #FFFFFF;
            border-bottom-color: #FFFFFF;
            padding: 8px;
            padding-top: 12px;
            background-color: #C0C0C0;
            position: relative;
            margin-top: 8px;
            margin-bottom: 10px;
        }
         .win98-outset-panel-legend {
            position: absolute;
            top: -0.6em;
            left: 8px;
            background-color: #C0C0C0;
            padding: 0 4px;
            font-size: 11px;
        }

        .win98-link { color: #0000FF; text-decoration: underline; }
        .win98-link:visited { color: #800080; }

        .win98-status-bar {
            background-color: #C0C0C0; 
            padding: 2px 3px;
            border-top: 1px solid #FFFFFF;
            display: flex;
            gap: 1px;
            flex-shrink: 0; 
        }
        .win98-status-bar-panel {
            border: 1px inset #C0C0C0;
            border-top-color: #808080;
            border-left-color: #808080;
            padding: 1px 5px;
            flex-grow: 1;
            font-size: 11px;
            min-height: 18px;
            line-height: 16px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        .win98-status-bar-panel:first-child { min-width: 150px; flex-grow: 2; }
        #userNameText {
            cursor: pointer;
            text-decoration: underline;
            font-style: italic;
        }
        #userNameInput {
            height: 14px; 
            font-size: 11px;
            padding: 0 2px;
            margin-left: 2px; 
            border: 1px solid #000000; 
            background-color: #FFFFFF;
            width: 100px; 
        }


        h1, h2, h3 { font-family: 'Tahoma', 'Geneva', sans-serif; }
        h1 { font-size: 16px; margin-bottom: 8px; color: #000080;}
        h2 { font-size: 14px; margin-bottom: 6px; color: #000080;}
        h3 { font-size: 12px; margin-bottom: 4px; font-weight: bold;}

        hr.win98-hr {
            border: 0;
            height: 2px;
            border-top: 1px solid #808080;
            border-bottom: 1px solid #FFFFFF;
            margin: 8px 0;
        }
        
        .win98-dialog {
            display: none; 
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            min-width: 300px;
            max-width: 500px;
        }
       
        #preferencesDialog .win98-dialog-content-area { 
             padding: 15px;
        }
        #preferencesDialog label {
            display: block;
            margin-bottom: 8px;
        }
        #preferencesDialog select {
            margin-left: 5px;
            padding: 1px;
        }


        #suggestToolFormContainer.win98-window, 
        #aiResponseDialog.win98-window,
        .generic-dialog.win98-window,
        #preferencesDialog.win98-window { 
            margin: 10px auto; 
            width: 90%; 
            max-width: 480px;
            position: absolute; 
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000; 
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5); 
            flex-grow: 0; 
            height: auto; 
        }
        #suggestToolFormContainer label { 
            display: block;
            margin-bottom: 2px;
            margin-top: 6px;
        }
        #suggestToolFormContainer input[type="text"], 
        #suggestToolFormContainer textarea { 
            width: 100%; 
            margin-bottom: 6px;
        }
        .form-actions, .dialog-actions { 
            text-align: center; 
            margin-top: 10px;
            padding: 8px;
            border-top: 1px solid #808080;
            box-shadow: 0 -1px 0 #FFFFFF;
        }
        .form-actions .win98-button { margin-left: 5px; text-align:right; } 
        
        #aiResponseDialogContent, .generic-dialog-content { 
            padding: 10px; 
            background-color: #FFFFFF; 
            max-height: 250px; 
            overflow-y: auto; 
            border-top: 1px solid #808080; 
            border-bottom: 1px solid #808080;
            font-size: 11px;
            line-height: 1.4;
            text-align: left; 
        }
        .generic-dialog-content p { margin-bottom: 10px; }
        .generic-dialog-content label { display: block; margin-bottom: 5px; }
        .generic-dialog-content input[type="checkbox"] { margin-right: 5px; vertical-align: middle;}


        .post-item {
            border-bottom: 1px solid #C0C0C0;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        .post-item:last-child { border-bottom: none; margin-bottom: 0; }

        .post-item h3 a { color: #0000FF; text-decoration: underline; }
        .post-meta {
            font-size: 10px;
            color: #505050;
            margin-bottom: 5px;
        }
        .post-item .tool-image {
            float: left;
            margin-right: 8px;
            margin-bottom: 4px;
            border: 1px solid #000000;
            max-width: 80px;
            max-height: 60px;
        }
        .post-content p {
            font-size: 12px;
            line-height: 1.5;
            color: #000000;
        }
        .clearfix::after { content: ""; clear: both; display: table; }

        #loadingMessage, #errorMessage {
            text-align: center;
            padding: 20px;
            font-style: italic;
        }
        #errorMessage { color: #FF0000; font-weight: bold; }

        .sidebar-section-title {
            font-weight: bold;
            margin-bottom: 4px;
            font-size: 12px;
            color: #000000;
        }
        .sidebar-section-title.first-section { 
             margin-top: 0; 
        }
        .sidebar-link, .sidebar-home-link { /* Shared style for sidebar links */
            display: block;
            color: #0000FF;
            text-decoration: underline;
            margin-bottom: 3px;
            font-size: 11px;
        }
         .sidebar-link:visited, .sidebar-home-link:visited { color: #800080; }
         .sidebar-home-link {
            font-weight: bold; /* Make Home link bold */
            margin-bottom: 8px; /* Add some space below Home */
         }

    </style>
</head>
<body>

    <div class="main-app-container">
        <div class="win98-window" id="mainAppWindow"> <div class="win98-title-bar">
                <div style="display: flex; align-items: center;">
                    <div class="win98-title-bar-icon"></div>
                    <span class="win98-title-bar-text">BAnsMax Archive - Win98 Edition</span>
                </div>
                <div class="win98-title-bar-controls">
                    <span>0</span> <span>1</span> <span id="closeMainWindowBtn">r</span> </div>
            </div>

            <div class="win98-menu-bar">
                <div class="menu-item-container">
                    <span class="menu-item-main" data-menu="fileDropdown"><u>F</u>ile</span>
                    <div id="fileDropdown" class="menu-dropdown">
                        <div class="menu-dropdown-item" id="showSuggestToolFormBtn">S<u>u</u>ggest New Tool...</div> <div class="menu-dropdown-item" id="menuPrintView"><u>P</u>rint View...</div>
                        <div class="menu-dropdown-separator"></div>
                        <div class="menu-dropdown-item" id="menuClearFilter"><u>C</u>lear Filter</div>
                        <div class="menu-dropdown-separator"></div>
                        <div class="menu-dropdown-item" id="menuExitApp">E<u>x</u>it</div>
                    </div>
                </div>
                <div class="menu-item-container">
                    <span class="menu-item-main" data-menu="editDropdown"><u>E</u>dit</span>
                    <div id="editDropdown" class="menu-dropdown">
                        <div class="menu-dropdown-item" id="menuOpenPreferences">Pr<u>e</u>ferences...</div>
                    </div>
                </div>
                <div class="menu-item-container">
                    <span class="menu-item-main" data-menu="viewDropdown"><u>V</u>iew</span>
                    <div id="viewDropdown" class="menu-dropdown">
                        <div class="menu-dropdown-item" id="menuSortDateDesc">Sort: Newest</div>
                        <div class="menu-dropdown-item" id="menuSortDateAsc">Sort: Oldest</div>
                        <div class="menu-dropdown-item" id="menuSortTitleAsc">Sort: Title (A-Z)</div>
                        <div class="menu-dropdown-item" id="menuSortTitleDesc">Sort: Title (Z-A)</div>
                        <div class="menu-dropdown-separator"></div>
                        <div class="menu-dropdown-item" id="menuRefreshView"><u>R</u>efresh View</div>
                    </div>
                </div>
                <div class="menu-item-container">
                    <span class="menu-item-main" data-menu="toolsDropdown"><u>T</u>ools</span>
                    <div id="toolsDropdown" class="menu-dropdown">
                        <div class="menu-dropdown-item" id="menuCheckUpdates">Check for New Tools...</div>
                    </div>
                </div>
                <div class="menu-item-container">
                    <span class="menu-item-main" data-menu="helpDropdown"><u>H</u>elp</span>
                    <div id="helpDropdown" class="menu-dropdown">
                        <div class="menu-dropdown-item" id="menuAbout"><u>A</u>bout BAnsMax Archive...</div>
                    </div>
                </div>
                <div class="menu-search-container">
                    <input type="text" id="menuSearchInput" placeholder="Search Tools..." class="win98-input">
                </div>
            </div>

            <div id="suggestToolFormContainer" class="win98-window generic-dialog" style="display: none;">
                 <div class="win98-title-bar" style="padding: 2px 4px; font-size: 11px;"> 
                    <span id="suggestToolFormTitle" class="win98-title-bar-text">Suggest New Tool</span> <div class="win98-title-bar-controls">
                        <span id="closeSuggestToolFormBtn" title="Close Form">r</span> </div>
                </div>
                <form id="suggestToolForm" style="padding: 8px;"> <label for="suggestToolName">Tool Name:</label>
                    <input type="text" id="suggestToolName" name="suggestToolName" class="win98-input" required>
                    
                    <label for="suggestToolLink">Tool Link (Optional):</label>
                    <input type="text" id="suggestToolLink" name="suggestToolLink" class="win98-input">
                    
                    <label for="suggestReason">Reason for Suggestion / Notes:</label>
                    <textarea id="suggestReason" name="suggestReason" class="win98-textarea" required></textarea>
                    
                    <div class="form-actions" style="text-align:right;">
                        <button type="submit" class="win98-button primary">Submit Suggestion</button> <button type="button" id="cancelSuggestToolBtn" class="win98-button">Cancel</button> </div>
                </form>
            </div>

            <div id="aiResponseDialog" class="win98-window generic-dialog" style="display: none; z-index: 1010;">
                <div class="win98-title-bar" style="padding: 2px 4px; font-size: 11px;">
                    <span id="aiResponseDialogTitle" class="win98-title-bar-text">AI Response</span>
                    <div class="win98-title-bar-controls">
                        <span id="closeAiResponseDialogBtn" title="Close">r</span>
                    </div>
                </div>
                <div id="aiResponseDialogContent"></div>
                <div class="dialog-actions">
                    <button id="okAiResponseDialogBtn" class="win98-button primary">OK</button>
                </div>
            </div>

            <div id="genericDialog" class="win98-window generic-dialog" style="display: none; z-index: 1005;">
                <div class="win98-title-bar" style="padding: 2px 4px; font-size: 11px;">
                    <span id="genericDialogTitle" class="win98-title-bar-text">Dialog</span>
                    <div class="win98-title-bar-controls">
                        <span id="closeGenericDialogBtn" title="Close">r</span>
                    </div>
                </div>
                <div id="genericDialogContent" class="generic-dialog-content" style="background-color: #C0C0C0; border:none; padding: 15px;">
                </div>
                <div class="dialog-actions">
                    <button id="okGenericDialogBtn" class="win98-button primary">OK</button>
                </div>
            </div>

            <div id="preferencesDialog" class="win98-window" style="display: none; max-width: 400px; z-index:1005; flex-grow:0; height:auto;">
                <div class="win98-title-bar">
                    <span class="win98-title-bar-text">Preferences</span>
                    <div class="win98-title-bar-controls">
                        <span id="closePreferencesDialogBtn" title="Close">r</span>
                    </div>
                </div>
                <div id="preferencesDialogContent" class="win98-dialog-content-area" style="padding: 15px; background-color: #C0C0C0;">
                    <label for="desktopBgColorSelect">Desktop Background Color:</label>
                    <select id="desktopBgColorSelect" class="win98-input win98-select" style="width:100%; margin-bottom:10px;">
                        <option value="#008080">Teal (Default)</option>
                        <option value="#800080">Purple</option>
                        <option value="#5A5A5A">Dark Gray</option>
                        <option value="#2E8B57">Jungle Green</option>
                    </select>

                    <label for="windowSchemeSelect">Window Color Scheme:</label>
                    <select id="windowSchemeSelect" class="win98-input win98-select" style="width:100%; margin-bottom:15px;">
                        <option value="win98-scheme-standard">Windows Standard (Default)</option>
                        <option value="win98-scheme-marine">Marine Blue</option>
                        <option value="win98-scheme-olive">Olive Green</option>
                        <option value="win98-scheme-spruce">Spruce</option>
                    </select>
                     <hr class="win98-hr">
                    <p style="font-size:10px; margin-top:10px;">Other mock preferences:</p>
                    <label><input type="checkbox" id="prefTooltips"> Show Tooltips</label><br>
                    <label><input type="checkbox" id="prefAnimations" checked> Enable Animations</label>
                </div>
                <div class="dialog-actions">
                    <button id="okPreferencesDialogBtn" class="win98-button primary">OK</button>
                    <button id="applyPreferencesDialogBtn" class="win98-button">Apply</button>
                </div>
            </div>


            <div class="win98-content-wrapper">
                <aside class="win98-sidebar">
                    <a href="#" class="sidebar-home-link" id="sidebarHomeLink">Home (All Tools)</a>
                    <div class="sidebar-section-title first-section">Categories</div>
                    <a href="#" class="sidebar-link" data-category="Adblocking / Privacy">Adblocking / Privacy</a>
                    <a href="#" class="sidebar-link" data-category="Android / iOS">Android / iOS</a>
                    <a href="#" class="sidebar-link" data-category="Artificial Intelligence">Artificial Intelligence</a>
                    <a href="#" class="sidebar-link" data-category="Books / Comics / Manga">Books / Comics / Manga</a>
                    <a href="#" class="sidebar-link" data-category="Downloading">Downloading</a>
                    <a href="#" class="sidebar-link" data-category="Educational">Educational</a>
                    <a href="#" class="sidebar-link" data-category="Gaming / Emulation">Gaming / Emulation</a>
                    <!-- Removed: Graphics / Design, Internet / Communication, Multimedia Creation, Productivity / Office -->
                    <a href="#" class="sidebar-link" data-category="Linux / macOS">Linux / macOS</a>
                    <a href="#" class="sidebar-link" data-category="Miscellaneous">Miscellaneous</a>
                    <a href="#" class="sidebar-link" data-category="Movies / TV / Anime">Movies / TV / Anime</a>
                    <a href="#" class="sidebar-link" data-category="Music / Podcasts / Radio">Music / Podcasts / Radio</a>
                    <a href="#" class="sidebar-link" data-category="Non-English">Non-English</a>
                    <a href="#" class="sidebar-link" data-category="Retro Computing / Abandonware">Retro Computing / Abandonware</a>
                    <a href="#" class="sidebar-link" data-category="Torrenting">Torrenting</a>
                    
                    <div class="sidebar-bottom-content">
                        <!-- My Computer section removed -->
                    </div>
                </aside>

                <main class="win98-main-content-area" id="postsContainer">
                    <div id="loadingMessage">Loading entries from disk... Please wait.</div>
                    <div id="errorMessage" style="display:none;"></div>
                </main>
            </div>

            <div class="win98-status-bar">
                <div class="win98-status-bar-panel" id="statusText">Ready</div>
                <div class="win98-status-bar-panel" id="userStatusPanel">User: <span id="userNameText">Guest</span></div>
                <div class="win98-status-bar-panel" id="currentTime" style="min-width: 70px; flex-grow: 0;"></div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, setLogLevel, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "YOUR_API_KEY", 
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-win98-blog';
        let userId = null;
        let currentCategoryFilter = null; 
        let currentSortCriteria = { field: 'createdAt', direction: 'desc' }; 
        let activeMenu = null; 
        let currentSearchTerm = null; 

        const defaultToolsData = [
            // Adblocking / Privacy
            { id: 'adblock_ublock', title: "uBlock Origin - Lightweight Ad Blocker", toolName: "uBlock Origin", toolLink: "https://github.com/gorhill/uBlock#ublock-origin", author: "R. Hill & contributors", category: "Adblocking / Privacy", content: "Efficient, wide-spectrum content blocker. Easy on CPU and memory.", createdAt: { seconds: Math.floor(new Date('2025-05-20T10:00:00Z').getTime() / 1000) } },
            { id: 'adblock_privacy_badger', title: "Privacy Badger - Stop Invisible Trackers", toolName: "Privacy Badger", toolLink: "https://privacybadger.org/", author: "EFF", category: "Adblocking / Privacy", content: "Automatically learns to block invisible trackers based on behavior.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:59:00Z').getTime() / 1000) } },
            { id: 'adblock_brave', title: "Brave Browser - Private & Secure", toolName: "Brave Browser", toolLink: "https://brave.com/", author: "Brave Software", category: "Adblocking / Privacy", content: "Blocks ads and trackers by default. Chromium-based.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:58:00Z').getTime() / 1000) } },
            { id: 'adblock_duckduckgo_ext', title: "DuckDuckGo Privacy Essentials Ext.", toolName: "DuckDuckGo Privacy Essentials", toolLink: "https://duckduckgo.com/app", author: "DuckDuckGo", category: "Adblocking / Privacy", content: "Tracker blocking, smarter encryption, private search.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:57:00Z').getTime() / 1000) } },
            { id: 'adblock_tor_browser', title: "Tor Browser - Anonymous Browse", toolName: "Tor Browser", toolLink: "https://www.torproject.org/download/", author: "The Tor Project", category: "Adblocking / Privacy", content: "Protects against tracking, surveillance, and censorship.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:56:00Z').getTime() / 1000) } },
            { id: 'adblock_https_everywhere', title: "HTTPS Everywhere - Encrypt the Web", toolName: "HTTPS Everywhere", toolLink: "https://www.eff.org/https/everywhere", author: "EFF & Tor Project", category: "Adblocking / Privacy", content: "Encrypts communications by switching sites to HTTPS.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:55:00Z').getTime() / 1000) } },
            { id: 'adblock_nextdns', title: "NextDNS - Cloud DNS Blocker", toolName: "NextDNS", toolLink: "https://nextdns.io/", author: "NextDNS Inc.", category: "Adblocking / Privacy", content: "Cloud-based DNS filtering service for blocking ads & trackers across all devices. Customizable blocklists.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:54:00Z').getTime() / 1000) } },
            { id: 'adblock_adguard_dns', title: "AdGuard DNS - Ad & Tracker Blocking DNS", toolName: "AdGuard DNS", toolLink: "https://adguard-dns.io/", author: "AdGuard Software Ltd.", category: "Adblocking / Privacy", content: "A free DNS service that blocks ads, trackers, and malicious websites at the network level.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:53:00Z').getTime() / 1000) } },
            { id: 'adblock_decentraleyes', title: "Decentraleyes - Local CDN Emulation", toolName: "Decentraleyes", toolLink: "https://decentraleyes.org/", author: "Thomas Rientjes", category: "Adblocking / Privacy", content: "Protects against tracking via 'free' CDNs by emulating them locally.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:52:00Z').getTime() / 1000) } },
            { id: 'adblock_privacytools_io', title: "PrivacyTools.io - Encryption & Privacy Resources", toolName: "PrivacyTools.io", toolLink: "https://www.privacytools.io/", author: "PrivacyTools Team", category: "Adblocking / Privacy", content: "Provides services, tools and knowledge to protect your privacy against global mass surveillance.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:51:00Z').getTime() / 1000) } },
            { id: 'adblock_ghostery', title: "Ghostery – Privacy Ad Blocker", toolName: "Ghostery", toolLink: "https://www.ghostery.com/", author: "Ghostery GmbH", category: "Adblocking / Privacy", content: "Browser extension that blocks ads, stops trackers and speeds up websites.", createdAt: { seconds: Math.floor(new Date('2025-05-20T09:50:00Z').getTime() / 1000) } },
            
            // Artificial Intelligence 
            { id: 'ai_hf_spaces', title: "Hugging Face Spaces - AI Demos", toolName: "Hugging Face Spaces", toolLink: "https://huggingface.co/spaces", author: "Hugging Face", category: "Artificial Intelligence", content: "Platform to explore, run, and share AI models and demos.", createdAt: { seconds: Math.floor(new Date('2025-05-19T10:00:00Z').getTime() / 1000) } },
            { id: 'ai_colab', title: "Google Colab - Free Jupyter Notebooks", toolName: "Google Colaboratory", toolLink: "https://colab.research.google.com/", author: "Google", category: "Artificial Intelligence", content: "Free cloud-based Jupyter notebook environment for AI/ML.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:59:00Z').getTime() / 1000) } },
            { id: 'ai_tf_playground', title: "TensorFlow Playground - Neural Networks", toolName: "TensorFlow Playground", toolLink: "https://playground.tensorflow.org/", author: "Google Brain Team", category: "Artificial Intelligence", content: "Tinker with a neural network directly in your browser.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:58:00Z').getTime() / 1000) } },
            { id: 'ai_perplexity_ai', title: "Perplexity AI - Conversational Search", toolName: "Perplexity AI", toolLink: "https://www.perplexity.ai/", author: "Perplexity AI", category: "Artificial Intelligence", content: "An AI-powered search engine that provides direct answers with citations.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:57:00Z').getTime() / 1000) } },
            { id: 'ai_claude_ai', title: "Claude - AI Assistant", toolName: "Claude", toolLink: "https://claude.ai/", author: "Anthropic", category: "Artificial Intelligence", content: "A next-generation AI assistant for tasks and conversations.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:56:00Z').getTime() / 1000) } },
            { id: 'ai_runwayml', title: "RunwayML - AI Magic Tools", toolName: "RunwayML", toolLink: "https://runwayml.com/", author: "Runway AI, Inc.", category: "Artificial Intelligence", content: "Suite of AI tools for art, video, and creative generation. Free tier available.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:55:00Z').getTime() / 1000) } },
            { id: 'ai_leonardoai', title: "Leonardo.Ai - AI Asset Generation", toolName: "Leonardo.Ai", toolLink: "https://leonardo.ai/", author: "Leonardo.Ai", category: "Artificial Intelligence", content: "Platform for generating production-quality assets for creative projects with AI. Offers free daily credits.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:54:00Z').getTime() / 1000) } },
            { id: 'ai_civitai', title: "Civitai - Open-Source AI Art Models", toolName: "Civitai", toolLink: "https://civitai.com/", author: "Civitai", category: "Artificial Intelligence", content: "A hub for sharing and discovering open-source AI art models, primarily for Stable Diffusion.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:53:00Z').getTime() / 1000) } },
            { id: 'ai_stablediffonline', title: "Stable Diffusion Online", toolName: "Stable Diffusion Online", toolLink: "https://stablediffusiononline.com/", author: "Stability AI & Community", category: "Artificial Intelligence", content: "Free web UIs to generate images using Stable Diffusion models.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:52:00Z').getTime() / 1000) } },
            { id: 'ai_poe_com', title: "Poe.com - AI Chatbots Platform", toolName: "Poe", toolLink: "https://poe.com/", author: "Quora", category: "Artificial Intelligence", content: "Platform to access and use various AI chatbots like ChatGPT, Claude, and more.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:51:00Z').getTime() / 1000) } },
            { id: 'ai_huggingchat', title: "HuggingChat - Open Source AI Chat", toolName: "HuggingChat", toolLink: "https://huggingface.co/chat/", author: "Hugging Face", category: "Artificial Intelligence", content: "An open-source alternative to ChatGPT, powered by various community models.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:50:00Z').getTime() / 1000) } },
            { id: 'ai_paperswithcode', title: "Papers With Code - AI Research", toolName: "Papers With Code", toolLink: "https://paperswithcode.com/", author: "Meta AI Research & Community", category: "Artificial Intelligence", content: "The latest in Machine Learning, code, and evaluation tables for research papers.", createdAt: { seconds: Math.floor(new Date('2025-05-19T09:49:00Z').getTime() / 1000) } },
            
            // Movies / TV / Anime
            { id: 'movies_plex', title: "Plex - Personal Media Server", toolName: "Plex", toolLink: "https://www.plex.tv/", author: "Plex, Inc.", category: "Movies / TV / Anime", content: "Organize and stream your personal media library to any device.", createdAt: { seconds: Math.floor(new Date('2025-05-18T10:00:00Z').getTime() / 1000) } },
            { id: 'movies_kodi', title: "Kodi - Open Source Media Center", toolName: "Kodi (XBMC)", toolLink: "https://kodi.tv/", author: "XBMC Foundation", category: "Movies / TV / Anime", content: "Free, open-source media player. Highly customizable.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:59:00Z').getTime() / 1000) } },
            { id: 'movies_myanimelist', title: "MyAnimeList - Anime & Manga Database", toolName: "MyAnimeList", toolLink: "https://myanimelist.net/", author: "MyAnimeList", category: "Movies / TV / Anime", content: "Track anime/manga, read reviews, get recommendations.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:58:00Z').getTime() / 1000) } },
            { id: 'movies_justwatch', title: "JustWatch - Streaming Guide", toolName: "JustWatch", toolLink: "https://www.justwatch.com/", author: "JustWatch GmbH", category: "Movies / TV / Anime", content: "Find where to legally stream movies, TV shows, and anime.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:57:00Z').getTime() / 1000) } },
            { id: 'movies_jellyfin', title: "Jellyfin - Free Software Media System", toolName: "Jellyfin", toolLink: "https://jellyfin.org/", author: "Jellyfin Team", category: "Movies / TV / Anime", content: "A volunteer-built media solution that puts you in control of your media.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:56:00Z').getTime() / 1000) } },
            { id: 'movies_anilist', title: "AniList - Anime & Manga Tracking", toolName: "AniList", toolLink: "https://anilist.co/", author: "AniList", category: "Movies / TV / Anime", content: "Track, discover, and share anime and manga. Modern UI.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:55:00Z').getTime() / 1000) } },
            { id: 'movies_simkl', title: "Simkl - TV, Anime & Movie Tracker", toolName: "Simkl", toolLink: "https://simkl.com/", author: "Simkl", category: "Movies / TV / Anime", content: "Automatically track what you're watching, get recommendations.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:54:00Z').getTime() / 1000) } },
            { id: 'movies_tautulli', title: "Tautulli - Plex Monitoring", toolName: "Tautulli", toolLink: "https://tautulli.com/", author: "Tautulli Team", category: "Movies / TV / Anime", content: "A 3rd party application that you can run alongside your Plex Media Server to monitor activity and track various statistics.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:53:00Z').getTime() / 1000) } },
            { id: 'movies_trakt_tv', title: "Trakt.tv - TV & Movie Tracking", toolName: "Trakt.tv", toolLink: "https://trakt.tv/", author: "Trakt", category: "Movies / TV / Anime", content: "Automatically track TV & movies you're watching. Get personalized recommendations.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:52:00Z').getTime() / 1000) } },
            { id: 'movies_letterboxd', title: "Letterboxd - Social Film Discovery", toolName: "Letterboxd", toolLink: "https://letterboxd.com/", author: "Letterboxd Limited", category: "Movies / TV / Anime", content: "Share your taste in film. Keep a diary of films you've seen, write reviews, and follow friends.", createdAt: { seconds: Math.floor(new Date('2025-05-18T09:51:00Z').getTime() / 1000) } },
            // Music / Podcasts / Radio
            { id: 'music_spotify_free', title: "Spotify (Free Tier) - Music & Podcasts", toolName: "Spotify Free", toolLink: "https://www.spotify.com/", author: "Spotify AB", category: "Music / Podcasts / Radio", content: "Access a vast library of music and podcasts with ads.", createdAt: { seconds: Math.floor(new Date('2025-05-17T10:00:00Z').getTime() / 1000) } },
            { id: 'music_audacity', title: "Audacity - Audio Editor & Recorder", toolName: "Audacity", toolLink: "https://www.audacityteam.org/", author: "The Audacity Team", category: "Music / Podcasts / Radio", content: "Free, open-source, cross-platform audio software.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:59:00Z').getTime() / 1000) } },
            { id: 'music_radiogarden', title: "Radio Garden - Explore Live Radio", toolName: "Radio Garden", toolLink: "http://radio.garden/", author: "Studio Puckey & Moniker", category: "Music / Podcasts / Radio", content: "Explore live radio stations from around theworld by rotating a globe.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:58:00Z').getTime() / 1000) } },
            { id: 'music_antennapod', title: "AntennaPod - Podcast Manager (Android)", toolName: "AntennaPod", toolLink: "https://antennapod.org/", author: "AntennaPod contributors", category: "Music / Podcasts / Radio", content: "Free and open-source podcast manager for Android.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:57:00Z').getTime() / 1000) } },
            { id: 'music_aimp', title: "AIMP - Audio Player", toolName: "AIMP", toolLink: "https://www.aimp.ru/", author: "Artem Izmaylov", category: "Music / Podcasts / Radio", content: "Freeware audio player for Windows and Android, known for its sound quality and customization.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:56:00Z').getTime() / 1000) } },
            { id: 'music_plexamp', title: "Plexamp - Plex Music Player", toolName: "Plexamp", toolLink: "https://plexamp.com/", author: "Plex Labs", category: "Music / Podcasts / Radio", content: "A beautiful, dedicated Plex music player with many features for audiophiles.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:55:00Z').getTime() / 1000) } },
            { id: 'music_pocket_casts', title: "Pocket Casts - Podcast Player", toolName: "Pocket Casts", toolLink: "https://www.pocketcasts.com/", author: "Automattic", category: "Music / Podcasts / Radio", content: "Podcast player for web and mobile with a free tier for listening.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:54:00Z').getTime() / 1000) } },
            { id: 'music_tunein_radio', title: "TuneIn Radio - Online Radio", toolName: "TuneIn Radio", toolLink: "https://tunein.com/", author: "TuneIn", category: "Music / Podcasts / Radio", content: "Listen to live sports, news, music, podcasts and radio stations from around the world.", createdAt: { seconds: Math.floor(new Date('2025-05-17T09:53:00Z').getTime() / 1000) } },
            // Gaming / Emulation
            { id: 'gaming_retroarch', title: "RetroArch - Frontend for Emulators", toolName: "RetroArch", toolLink: "https://www.retroarch.com/", author: "Libretro Team", category: "Gaming / Emulation", content: "A frontend for emulators, game engines, and media players.", createdAt: { seconds: Math.floor(new Date('2025-05-16T10:00:00Z').getTime() / 1000) } },
            { id: 'gaming_steam_f2p', title: "Steam - Free-to-Play Games", toolName: "Steam (Free Games)", toolLink: "https://store.steampowered.com/genre/Free%20to%20Play/", author: "Valve Corporation", category: "Gaming / Emulation", content: "Access a large library of free-to-play games on the Steam platform.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:59:00Z').getTime() / 1000) } },
            { id: 'gaming_lutris', title: "Lutris - Open Gaming Platform (Linux)", toolName: "Lutris", toolLink: "https://lutris.net/", author: "Lutris contributors", category: "Gaming / Emulation", content: "An open-source gaming platform for Linux, helps manage games.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:58:00Z').getTime() / 1000) } },
            { id: 'gaming_itchio', title: "Itch.io - Indie Games", toolName: "Itch.io", toolLink: "https://itch.io/", author: "Itch Corp", category: "Gaming / Emulation", content: "A platform for indie game developers, many free games available.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:57:00Z').getTime() / 1000) } },
            { id: 'gaming_pcsx2', title: "PCSX2 - PlayStation 2 Emulator", toolName: "PCSX2", toolLink: "https://pcsx2.net/", author: "PCSX2 Team", category: "Gaming / Emulation", content: "A powerful open-source PlayStation 2 emulator for Windows, Linux, and macOS.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:56:00Z').getTime() / 1000) } },
            { id: 'gaming_dolphin_emu', title: "Dolphin Emulator - GameCube & Wii", toolName: "Dolphin Emulator", toolLink: "https://dolphin-emu.org/", author: "Dolphin Team", category: "Gaming / Emulation", content: "An emulator for two recent Nintendo video game consoles: the GameCube and the Wii.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:55:00Z').getTime() / 1000) } },
            { id: 'gaming_osrs', title: "Old School RuneScape", toolName: "Old School RuneScape", toolLink: "https://oldschool.runescape.com/", author: "Jagex", category: "Gaming / Emulation", content: "The classic MMORPG experience. Free to play with optional membership.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:54:00Z').getTime() / 1000) } },
            { id: 'gaming_mame', title: "MAME - Arcade Emulator", toolName: "MAME", toolLink: "https://www.mamedev.org/", author: "MAME Team", category: "Gaming / Emulation", content: "Multiple Arcade Machine Emulator - preserves gaming history by preventing vintage games from being lost or forgotten.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:53:00Z').getTime() / 1000) } },
            { id: 'gaming_openemu', title: "OpenEmu - Emulator Frontend (macOS)", toolName: "OpenEmu", toolLink: "https://openemu.org/", author: "OpenEmu Team", category: "Gaming / Emulation", content: "A beautiful, user-friendly emulator frontend for macOS.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:52:00Z').getTime() / 1000) } },
            { id: 'gaming_scummvm', title: "ScummVM - Classic Adventure Game Interpreter", toolName: "ScummVM", toolLink: "https://www.scummvm.org/", author: "The ScummVM Team", category: "Gaming / Emulation", content: "Allows you to play many classic graphical point-and-click adventure games.", createdAt: { seconds: Math.floor(new Date('2025-05-16T09:51:00Z').getTime() / 1000) } },
            // Books / Comics / Manga
            { id: 'books_calibre', title: "Calibre - E-book Management", toolName: "Calibre", toolLink: "https://calibre-ebook.com/", author: "Kovid Goyal", category: "Books / Comics / Manga", content: "Powerful e-book management software, library organizer, converter, and viewer.", createdAt: { seconds: Math.floor(new Date('2025-05-15T10:00:00Z').getTime() / 1000) } },
            { id: 'books_gutenberg', title: "Project Gutenberg - Free E-books", toolName: "Project Gutenberg", toolLink: "https://www.gutenberg.org/", author: "Project Gutenberg", category: "Books / Comics / Manga", content: "Over 70,000 free e-books, primarily older works with expired U.S. copyright.", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:59:00Z').getTime() / 1000) } },
            { id: 'books_tachiyomi', title: "Tachiyomi - Manga Reader (Android)", toolName: "Tachiyomi", toolLink: "https://tachiyomi.org/", author: "Tachiyomi contributors", category: "Books / Comics / Manga", content: "Free and open-source manga reader for Android (requires sourcing extensions).", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:58:00Z').getTime() / 1000) } },
            { id: 'books_cdisplayex', title: "CDisplay Ex - Comic Book Reader", toolName: "CDisplay Ex", toolLink: "http://www.cdisplayex.com/", author: "David Ayton", category: "Books / Comics / Manga", content: "Popular free comic book archive reader for Windows (CBR, CBZ).", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:57:00Z').getTime() / 1000) } },
            { id: 'books_libby', title: "Libby, by OverDrive - Library E-books", toolName: "Libby", toolLink: "https://www.overdrive.com/apps/libby/", author: "OverDrive", category: "Books / Comics / Manga", content: "Borrow ebooks, audiobooks, and magazines from your local library for free.", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:56:00Z').getTime() / 1000) } },
            { id: 'books_openlibrary', title: "Open Library - Digital Library", toolName: "Open Library", toolLink: "https://openlibrary.org/", author: "Internet Archive", category: "Books / Comics / Manga", content: "An open, editable library catalog, building towards a web page for every book ever published. Offers ebook lending.", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:55:00Z').getTime() / 1000) } },
            { id: 'books_sumatrapdf', title: "Sumatra PDF - Lightweight PDF/Ebook Reader", toolName: "Sumatra PDF", toolLink: "https://www.sumatrapdfreader.org/free-pdf-reader.html", author: "Krzysztof Kowalczyk", category: "Books / Comics / Manga", content: "A free, open-source, lightweight PDF, eBook (ePub, Mobi), XPS, DjVu, CHM, Comic Book (CBZ and CBR) reader for Windows.", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:54:00Z').getTime() / 1000) } },
            { id: 'books_manybooks', title: "ManyBooks.net - Free eBooks", toolName: "ManyBooks.net", toolLink: "https://manybooks.net/", author: "ManyBooks", category: "Books / Comics / Manga", content: "Browse through the PDBs and download them for free. Thousands of free eBooks.", createdAt: { seconds: Math.floor(new Date('2025-05-15T09:53:00Z').getTime() / 1000) } },
            // Downloading
            { id: 'download_jdownloader', title: "JDownloader 2 - Download Manager", toolName: "JDownloader 2", toolLink: "https://jdownloader.org/", author: "AppWork GmbH", category: "Downloading", content: "Free, open-source download management tool for many one-click hosters.", createdAt: { seconds: Math.floor(new Date('2025-05-14T10:00:00Z').getTime() / 1000) } },
            { id: 'download_fdm', title: "Free Download Manager (FDM)", toolName: "Free Download Manager", toolLink: "https://www.freedownloadmanager.org/", author: "SoftDeluxe Ltd.", category: "Downloading", content: "Powerful modern download accelerator and organizer.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:59:00Z').getTime() / 1000) } },
            { id: 'download_ytdlp', title: "yt-dlp - Video Downloader (CLI)", toolName: "yt-dlp", toolLink: "https://github.com/yt-dlp/yt-dlp", author: "yt-dlp contributors", category: "Downloading", content: "A youtube-dl fork with additional features and fixes. Downloads videos from YouTube and more.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:58:00Z').getTime() / 1000) } },
            { id: 'download_motrix', title: "Motrix - Download Manager", toolName: "Motrix", toolLink: "https://motrix.app/", author: "Dr.Ryan", category: "Downloading", content: "Full-featured download manager supporting HTTP, FTP, BitTorrent, Magnet.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:57:00Z').getTime() / 1000) } },
            { id: 'download_wget', title: "GNU Wget - File Retriever (CLI)", toolName: "Wget", toolLink: "https://www.gnu.org/software/wget/", author: "GNU Project", category: "Downloading", content: "Free software package for retrieving files using HTTP, HTTPS, FTP and FTPS.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:56:00Z').getTime() / 1000) } },
            { id: 'download_aria2', title: "aria2 - Lightweight Downloader (CLI)", toolName: "aria2", toolLink: "https://aria2.github.io/", author: "Tatsuhiro Tsujikawa", category: "Downloading", content: "A lightweight multi-protocol & multi-source command-line download utility.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:55:00Z').getTime() / 1000) } },
            // Torrenting
            { id: 'torrent_qbittorrent', title: "qBittorrent - Torrent Client", toolName: "qBittorrent", toolLink: "https://www.qbittorrent.org/", author: "The qBittorrent project", category: "Torrenting", content: "Free, open-source, ad-free, and lightweight BitTorrent client.", createdAt: { seconds: Math.floor(new Date('2025-05-13T10:00:00Z').getTime() / 1000) } },
            { id: 'torrent_transmission', title: "Transmission - BitTorrent Client", toolName: "Transmission", toolLink: "https://transmissionbt.com/", author: "Transmission Project", category: "Torrenting", content: "Fast, easy, and free BitTorrent client. Known for simplicity.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:59:00Z').getTime() / 1000) } },
            { id: 'torrent_deluge', title: "Deluge - Torrent Client", toolName: "Deluge", toolLink: "https://deluge-torrent.org/", author: "Deluge Team", category: "Torrenting", content: "Lightweight, Free Software, cross-platform BitTorrent client.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:58:00Z').getTime() / 1000) } },
            { id: 'torrent_biglybt', title: "BiglyBT - Feature-rich Torrent Client", toolName: "BiglyBT", toolLink: "https://www.biglybt.com/", author: "BiglyBT Team", category: "Torrenting", content: "Free, open source torrent client. A continuation of Vuze/Azureus.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:57:00Z').getTime() / 1000) } },
            { id: 'torrent_webtorrent', title: "WebTorrent Desktop - Streaming Torrent", toolName: "WebTorrent Desktop", toolLink: "https://webtorrent.io/desktop/", author: "WebTorrent.io", category: "Torrenting", content: "Streaming torrent client for Mac, Windows, and Linux.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:56:00Z').getTime() / 1000) } },
            { id: 'torrent_picotorrent', title: "PicoTorrent - Lightweight Client (Windows)", toolName: "PicoTorrent", toolLink: "https://picotorrent.org/", author: "PicoTorrent Team", category: "Torrenting", content: "A lightweight, free and open source BitTorrent client for Windows.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:55:00Z').getTime() / 1000) } },
            { id: 'torrent_publicdomain', title: "Public Domain Torrents - Legal Torrents", toolName: "Public Domain Torrents", toolLink: "http://www.publicdomaintorrents.info/", author: "Various", category: "Torrenting", content: "A collection of movies that are in the public domain, available via torrents.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:54:00Z').getTime() / 1000) } },
            { id: 'torrent_legittorrents', title: "Legit Torrents - Legal Content", toolName: "Legit Torrents", toolLink: "http://www.legittorrents.info/", author: "Various", category: "Torrenting", content: "Find legally distributable torrents for various types of content.", createdAt: { seconds: Math.floor(new Date('2025-05-13T09:53:00Z').getTime() / 1000) } },
            // Educational
            { id: 'edu_khanacademy', title: "Khan Academy - Free Online Courses", toolName: "Khan Academy", toolLink: "https://www.khanacademy.org/", author: "Khan Academy", category: "Educational", content: "Offers practice exercises, instructional videos, and a personalized learning dashboard.", createdAt: { seconds: Math.floor(new Date('2025-05-12T10:00:00Z').getTime() / 1000) } },
            { id: 'edu_anki', title: "Anki - Powerful Flashcards", toolName: "Anki", toolLink: "https://apps.ankiweb.net/", author: "Damien Elmes", category: "Educational", content: "Powerful, intelligent flashcard program. Free and open-source.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:59:00Z').getTime() / 1000) } },
            { id: 'edu_zotero', title: "Zotero - Research Assistant", toolName: "Zotero", toolLink: "https://www.zotero.org/", author: "Corporation for Digital Scholarship", category: "Educational", content: "Free, easy-to-use tool to help you collect, organize, cite, and share research.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:58:00Z').getTime() / 1000) } },
            { id: 'edu_geogebra', title: "GeoGebra - Dynamic Mathematics", toolName: "GeoGebra", toolLink: "https://www.geogebra.org/", author: "International GeoGebra Institute", category: "Educational", content: "Free dynamic mathematics software for all levels of education.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:57:00Z').getTime() / 1000) } },
            { id: 'edu_stellarium', title: "Stellarium - Planetarium Software", toolName: "Stellarium", toolLink: "https://stellarium.org/", author: "Stellarium Team", category: "Educational", content: "Free open source planetarium for your computer.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:56:00Z').getTime() / 1000) } },
            { id: 'edu_celestia', title: "Celestia - 3D Space Simulator", toolName: "Celestia", toolLink: "https://celestia.space/", author: "Celestia Development Team", category: "Educational", content: "Real-time 3D visualization of space. Explore the universe.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:55:00Z').getTime() / 1000) } },
            { id: 'edu_libreoffice_edu', title: "LibreOffice - Office Suite", toolName: "LibreOffice", toolLink: "https://www.libreoffice.org/", author: "The Document Foundation", category: "Educational", content: "Free and open source office suite, compatible with MS Office formats.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:54:00Z').getTime() / 1000) } },
            { id: 'edu_duolingo', title: "Duolingo - Language Learning", toolName: "Duolingo", toolLink: "https://www.duolingo.com/", author: "Duolingo, Inc.", category: "Educational", content: "Learn languages for free. Web and mobile app.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:53:00Z').getTime() / 1000) } },
            { id: 'edu_edx', title: "edX - Online Courses from Universities", toolName: "edX", toolLink: "https://www.edx.org/", author: "edX Inc.", category: "Educational", content: "Access 2000 free online courses from 140 leading institutions worldwide.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:52:00Z').getTime() / 1000) } },
            { id: 'edu_coursera_audit', title: "Coursera (Audit Courses)", toolName: "Coursera (Audit)", toolLink: "https://www.coursera.org/", author: "Coursera Inc.", category: "Educational", content: "Audit many courses for free to access lectures and materials.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:51:00Z').getTime() / 1000) } },
            { id: 'edu_wolframalpha', title: "Wolfram Alpha - Computational Knowledge", toolName: "Wolfram Alpha", toolLink: "https://www.wolframalpha.com/", author: "Wolfram Research", category: "Educational", content: "Computes answers using built-in data, algorithms, and methods. Free tier available.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:50:00Z').getTime() / 1000) } },
            { id: 'edu_projecteuler', title: "Project Euler - Math/Programming Problems", toolName: "Project Euler", toolLink: "https://projecteuler.net/", author: "Project Euler", category: "Educational", content: "A series of challenging mathematical/computer programming problems.", createdAt: { seconds: Math.floor(new Date('2025-05-12T09:49:00Z').getTime() / 1000) } },
            // Android / iOS
            { id: 'android_newpipe', title: "NewPipe - YouTube Frontend (Android)", toolName: "NewPipe", toolLink: "https://newpipe.net/", author: "Team NewPipe", category: "Android / iOS", content: "A lightweight YouTube frontend for Android. No proprietary Google APIs.", createdAt: { seconds: Math.floor(new Date('2025-05-11T10:00:00Z').getTime() / 1000) } },
            { id: 'android_fdroid', title: "F-Droid - FOSS App Store (Android)", toolName: "F-Droid", toolLink: "https://f-droid.org/", author: "F-Droid Limited", category: "Android / iOS", content: "An installable catalogue of FOSS (Free and Open Source Software) applications for Android.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:59:00Z').getTime() / 1000) } },
            { id: 'android_signal', title: "Signal - Private Messenger", toolName: "Signal", toolLink: "https://signal.org/", author: "Signal Foundation", category: "Android / iOS", content: "End-to-end encrypted messaging and voice calls. Focus on privacy.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:58:00Z').getTime() / 1000) } },
            { id: 'android_bitwarden_mobile', title: "Bitwarden - Password Manager", toolName: "Bitwarden", toolLink: "https://bitwarden.com/", author: "Bitwarden Inc.", category: "Android / iOS", content: "Free and open-source password manager for all platforms.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:57:00Z').getTime() / 1000) } },
            { id: 'android_vlc_mobile', title: "VLC for Mobile", toolName: "VLC for Android/iOS", toolLink: "https://www.videolan.org/vlc/mobile.html", author: "VideoLAN Project", category: "Android / iOS", content: "VLC media player for mobile platforms, plays most local video and audio files, as well as network streams.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:56:00Z').getTime() / 1000) } },
            { id: 'android_termux', title: "Termux - Linux Environment (Android)", toolName: "Termux", toolLink: "https://termux.dev/en/", author: "Fredrik Fornwall", category: "Android / iOS", content: "Android terminal emulator and Linux environment app that works directly with no rooting or setup required.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:55:00Z').getTime() / 1000) } },
            { id: 'android_protonvpn_mobile', title: "ProtonVPN (Free Tier)", toolName: "ProtonVPN Free", toolLink: "https://protonvpn.com/", author: "Proton AG", category: "Android / iOS", content: "Free VPN service with a focus on privacy and security. Limited free servers.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:54:00Z').getTime() / 1000) } },
            { id: 'android_inshot', title: "InShot - Video Editor (Mobile)", toolName: "InShot", toolLink: "https://inshot.com/", author: "InShot Inc.", category: "Android / iOS", content: "Popular mobile video editor with many features. Free version with watermark.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:53:00Z').getTime() / 1000) } },
            { id: 'android_adaway', title: "AdAway - Ad Blocker (Android, Root/Non-Root)", toolName: "AdAway", toolLink: "https://adaway.org/", author: "AdAway Team", category: "Android / iOS", content: "An open source ad blocker for Android using the hosts file. Requires root for hosts file modification, VPN mode for non-root.", createdAt: { seconds: Math.floor(new Date('2025-05-11T09:52:00Z').getTime() / 1000) } },
            // Linux / macOS
            { id: 'linux_gimp', title: "GIMP - Image Editor", toolName: "GIMP", toolLink: "https://www.gimp.org/", author: "The GIMP Team", category: "Linux / macOS", content: "GNU Image Manipulation Program. Free & open-source raster graphics editor.", createdAt: { seconds: Math.floor(new Date('2025-05-10T10:00:00Z').getTime() / 1000) } },
            { id: 'linux_krita', title: "Krita - Digital Painting", toolName: "Krita", toolLink: "https://krita.org/en/", author: "Krita Foundation", category: "Linux / macOS", content: "Free and open-source professional-grade painting program.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:59:00Z').getTime() / 1000) } },
            { id: 'linux_homebrew', title: "Homebrew - Package Manager (macOS/Linux)", toolName: "Homebrew", toolLink: "https://brew.sh/", author: "Max Howell & contributors", category: "Linux / macOS", content: "The Missing Package Manager for macOS (or Linux).", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:58:00Z').getTime() / 1000) } },
            { id: 'linux_timeshift', title: "Timeshift - System Restore (Linux)", toolName: "Timeshift", toolLink: "https://github.com/teejee2008/timeshift", author: "Tony George", category: "Linux / macOS", content: "A system restore utility for Linux. Creates filesystem snapshots.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:57:00Z').getTime() / 1000) } },
            { id: 'linux_neofetch', title: "Neofetch - System Info (CLI)", toolName: "Neofetch", toolLink: "https://github.com/dylanaraps/neofetch", author: "Dylan Araps", category: "Linux / macOS", content: "A command-line system information tool written in bash 3.2+.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:56:00Z').getTime() / 1000) } },
            { id: 'linux_bleachbit_os', title: "BleachBit - System Cleaner (Linux/macOS)", toolName: "BleachBit", toolLink: "https://www.bleachbit.org/", author: "Andrew Ziem", category: "Linux / macOS", content: "Free cache, delete cookies, clear Internet history for Linux and Windows.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:55:00Z').getTime() / 1000) } },
            { id: 'linux_stacer', title: "Stacer - Linux System Optimizer", toolName: "Stacer", toolLink: "https://github.com/oguzhaninan/Stacer", author: "Oğuzhan İNAN", category: "Linux / macOS", content: "Linux System Optimizer and Monitoring. Open Source.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:54:00Z').getTime() / 1000) } },
            { id: 'linux_macchina', title: "Macchina - System Info (macOS/Linux CLI)", toolName: "Macchina", toolLink: "https://github.com/Macchina-CLI/macchina", author: "Macchina-CLI", category: "Linux / macOS", content: "A system information frontend with an emphasis on performance and minimalism.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:53:00Z').getTime() / 1000) } },
            { id: 'linux_iterm2', title: "iTerm2 - Terminal Emulator (macOS)", toolName: "iTerm2", toolLink: "https://iterm2.com/", author: "George Nachman", category: "Linux / macOS", content: "A replacement for Terminal and the successor to iTerm. Feature-rich.", createdAt: { seconds: Math.floor(new Date('2025-05-10T09:52:00Z').getTime() / 1000) } },
            // Non-English
            { id: 'noneng_deepl', title: "DeepL Translator", toolName: "DeepL", toolLink: "https://www.deepl.com/translator", author: "DeepL SE", category: "Non-English", content: "AI-powered translator known for its nuanced and accurate translations.", createdAt: { seconds: Math.floor(new Date('2025-05-09T10:00:00Z').getTime() / 1000) } },
            { id: 'noneng_aegisub', title: "Aegisub - Advanced Subtitle Editor", toolName: "Aegisub", toolLink: "http://www.aegisub.org/", author: "Aegisub contributors", category: "Non-English", content: "Cross-platform open source tool for creating and modifying subtitles.", createdAt: { seconds: Math.floor(new Date('2025-05-09T09:59:00Z').getTime() / 1000) } },
            { id: 'noneng_languagetool', title: "LanguageTool - Grammar & Spell Checker", toolName: "LanguageTool", toolLink: "https://languagetool.org/", author: "LanguageTooler GmbH", category: "Non-English", content: "Open source grammar, style, and spell checker. Supports many languages.", createdAt: { seconds: Math.floor(new Date('2025-05-09T09:58:00Z').getTime() / 1000) } },
            { id: 'noneng_anki_non_eng', title: "Anki for Language Learning", toolName: "Anki (Language Decks)", toolLink: "https://apps.ankiweb.net/", author: "Damien Elmes & Community", category: "Non-English", content: "Use Anki with community-shared decks for various languages.", createdAt: { seconds: Math.floor(new Date('2025-05-09T09:57:00Z').getTime() / 1000) } },
            // Miscellaneous
            { id: 'misc_ventoy', title: "Ventoy - Bootable USB Creator", toolName: "Ventoy", toolLink: "https://www.ventoy.net/", author: "longpanda", category: "Miscellaneous", content: "Open-source tool to create bootable USB drive for ISO/WIM/IMG/VHD(x)/EFI files.", createdAt: { seconds: Math.floor(new Date('2025-05-08T10:00:00Z').getTime() / 1000) } },
            { id: 'misc_standardnotes', title: "Standard Notes - Private Notes App", toolName: "Standard Notes", toolLink: "https://standardnotes.com/", author: "Standard Notes", category: "Miscellaneous", content: "A free, open-source, and end-to-end encrypted notes app.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:59:00Z').getTime() / 1000) } },
            { id: 'misc_photopea', title: "Photopea - Online Image Editor", toolName: "Photopea", toolLink: "https://www.photopea.com/", author: "Ivan Kutskir", category: "Miscellaneous", content: "Free online advanced image editor, similar to Photoshop.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:58:00Z').getTime() / 1000) } },
            { id: 'misc_internetarchive', title: "Internet Archive - Digital Library", toolName: "Internet Archive", toolLink: "https://archive.org/", author: "Internet Archive", category: "Miscellaneous", content: "Digital library of Internet sites and other cultural artifacts in digital form.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:57:00Z').getTime() / 1000) } },
            { id: 'misc_keepassxc', title: "KeePassXC - Password Manager", toolName: "KeePassXC", toolLink: "https://keepassxc.org/", author: "KeePassXC Team", category: "Miscellaneous", content: "Free and open-source cross-platform password manager.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:56:00Z').getTime() / 1000) } },
            { id: 'misc_worldtimebuddy', title: "WorldTimeBuddy - Time Zone Converter", toolName: "WorldTimeBuddy", toolLink: "https://www.worldtimebuddy.com/", author: "Helloka", category: "Miscellaneous", content: "Convenient world clock, time zone converter, and online meeting scheduler.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:55:00Z').getTime() / 1000) } },
            { id: 'misc_drawio', title: "draw.io (diagrams.net) - Diagramming", toolName: "draw.io", toolLink: "https://app.diagrams.net/", author: "JGraph Ltd.", category: "Miscellaneous", content: "Free online diagram software for making flowcharts, process diagrams, org charts, UML, ER and network diagrams.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:54:00Z').getTime() / 1000) } },
            { id: 'misc_portableapps', title: "PortableApps.com - Portable Software", toolName: "PortableApps.com", toolLink: "https://portableapps.com/", author: "Rare Ideas, LLC", category: "Miscellaneous", content: "Platform for portable software, allowing you to carry your favorite apps on a USB drive.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:53:00Z').getTime() / 1000) } },
            // Retro Computing / Abandonware
            { id: 'retro_wayback', title: "Internet Archive Wayback Machine", toolName: "Wayback Machine", toolLink: "https://archive.org/web/", author: "Internet Archive", category: "Retro Computing / Abandonware", content: "Explore archived versions of websites from the past.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:52:00Z').getTime() / 1000) } },
            { id: 'retro_spacejam', title: "Space Jam (1996) Website", toolName: "Space Jam (1996)", toolLink: "https://www.spacejam.com/1996/", author: "Warner Bros.", category: "Retro Computing / Abandonware", content: "The original, preserved website for the 1996 movie Space Jam.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:51:00Z').getTime() / 1000) } },
            { id: 'retro_oldversion', title: "OldVersion.com - Software Archive", toolName: "OldVersion.com", toolLink: "http://www.oldversion.com/", author: "OldVersion.com", category: "Retro Computing / Abandonware", content: "An archive of older versions of popular software.", createdAt: { seconds: Math.floor(new Date('2025-05-14T09:54:00Z').getTime() / 1000) } },
            { id: 'myabandonware', title: "My Abandonware - Retro Game Downloads", toolName: "My Abandonware", toolLink: "https://www.myabandonware.com/", author: "MyAbandonware", category: "Retro Computing / Abandonware", content: "Download over 20,000 old games for DOS, Windows, Amiga, C64, and more.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:50:00Z').getTime() / 1000) } },
            { id: 'emuparadise_info', title: "EmuParadise - Emulation News & Info", toolName: "EmuParadise (Info)", toolLink: "https://www.emuparadise.me/", author: "EmuParadise", category: "Retro Computing / Abandonware", content: "A long-standing community and resource for emulation news and information (direct ROM downloads were discontinued).", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:49:00Z').getTime() / 1000) } },
            { id: 'vetusware', title: "VETUSWARE.COM - Abandonware Collection", toolName: "VETUSWARE.COM", toolLink: "https://vetusware.com/", author: "VETUSWARE", category: "Retro Computing / Abandonware", content: "Large collection of abandonware, old versions of software and much more.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:48:00Z').getTime() / 1000) } },
            { id: 'winworldpc', title: "WinWorld - PC Software Museum", toolName: "WinWorldPC", toolLink: "https://winworldpc.com/home", author: "WinWorld Staff", category: "Retro Computing / Abandonware", content: "An online museum dedicated to preserving and showcasing vintage, abandoned, and pre-release software.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:47:00Z').getTime() / 1000) } },
            { id: 'classicreload', title: "ClassicReload - Play DOS Games Online", toolName: "ClassicReload", toolLink: "https://classicreload.com/", author: "ClassicReload", category: "Retro Computing / Abandonware", content: "Play over 6,000 classic DOS games and more in your browser for free.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:46:00Z').getTime() / 1000) } },
            { id: 'ia_software', title: "Internet Archive - Software Collection", toolName: "IA Software Collection", toolLink: "https://archive.org/details/software", author: "Internet Archive", category: "Retro Computing / Abandonware", content: "A vast collection of emulated software, games, and applications from various platforms.", createdAt: { seconds: Math.floor(new Date('2025-05-08T09:45:00Z').getTime() / 1000) } },
        ];


        const postsContainer = document.getElementById('postsContainer');
        const addPostFormEl = document.getElementById('addPostForm'); 
        const addPostFormContainer = document.getElementById('addPostFormContainer');
        const closeAddPostFormBtn = document.getElementById('closeAddPostFormBtn');
        const cancelAddPostBtn = document.getElementById('cancelAddPostBtn');
        
        const aiResponseDialog = document.getElementById('aiResponseDialog');
        const aiResponseDialogTitle = document.getElementById('aiResponseDialogTitle');
        const aiResponseDialogContent = document.getElementById('aiResponseDialogContent');
        const closeAiResponseDialogBtn = document.getElementById('closeAiResponseDialogBtn');
        const okAiResponseDialogBtn = document.getElementById('okAiResponseDialogBtn');

        const genericDialog = document.getElementById('genericDialog');
        const genericDialogTitle = document.getElementById('genericDialogTitle');
        const genericDialogContent = document.getElementById('genericDialogContent');
        const closeGenericDialogBtn = document.getElementById('closeGenericDialogBtn');
        const okGenericDialogBtn = document.getElementById('okGenericDialogBtn');

        const loadingMessage = document.getElementById('loadingMessage');
        const errorMessage = document.getElementById('errorMessage');
        const statusText = document.getElementById('statusText');
        const userStatusPanel = document.getElementById('userStatusPanel'); 
        const userNameText = document.getElementById('userNameText'); 
        const currentTimeDisplay = document.getElementById('currentTime');

        const menuBar = document.querySelector('.win98-menu-bar');
        menuBar.addEventListener('click', (event) => {
            const target = event.target;
            const menuItemMain = target.closest('.menu-item-main');

            if (menuItemMain) {
                const menuId = menuItemMain.dataset.menu;
                if (!menuId) return; 

                const dropdown = document.getElementById(menuId);
                if (!dropdown) return;

                if (activeMenu && activeMenu !== dropdown) {
                    activeMenu.style.display = 'none';
                    activeMenu.previousElementSibling.classList.remove('active');
                }

                if (dropdown.style.display === 'block') {
                    dropdown.style.display = 'none';
                    menuItemMain.classList.remove('active');
                    activeMenu = null;
                } else {
                    dropdown.style.display = 'block';
                    menuItemMain.classList.add('active');
                    activeMenu = dropdown;
                }
                event.stopPropagation(); 
            } else if (!target.closest('.menu-dropdown')) {
                if (activeMenu) {
                    activeMenu.style.display = 'none';
                    activeMenu.previousElementSibling.classList.remove('active');
                    activeMenu = null;
                }
            }
        });

        document.addEventListener('click', (event) => {
            if (activeMenu && !menuBar.contains(event.target)) {
                activeMenu.style.display = 'none';
                activeMenu.previousElementSibling.classList.remove('active');
                activeMenu = null;
            }
        });
        
        function showGenericDialog(title, htmlContent, showOkButton = true) {
            if(genericDialogTitle) genericDialogTitle.textContent = title;
            if(genericDialogContent) genericDialogContent.innerHTML = htmlContent;
            if(okGenericDialogBtn) okGenericDialogBtn.style.display = showOkButton ? 'inline-block' : 'none';
            if(genericDialog) genericDialog.style.display = 'block';
            if(statusText) statusText.textContent = title;
        }
        function closeGenericDialog() {
            if(genericDialog) genericDialog.style.display = 'none';
            if(statusText) statusText.textContent = "Ready";
        }
        if(closeGenericDialogBtn) closeGenericDialogBtn.addEventListener('click', closeGenericDialog);
        if(okGenericDialogBtn) okGenericDialogBtn.addEventListener('click', closeGenericDialog);


        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });
            if (currentTimeDisplay) currentTimeDisplay.textContent = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();

        function loadUserName() {
            const savedName = localStorage.getItem('win98UserName');
            if (userNameText) {
                userNameText.textContent = savedName || "Guest";
            }
        }

        function editUserName() {
            if (!userNameText || document.getElementById('userNameInput')) return; 

            const currentName = userNameText.textContent;
            userNameText.style.display = 'none'; 

            const input = document.createElement('input');
            input.type = 'text';
            input.id = 'userNameInput';
            input.value = currentName === "Guest" ? "" : currentName;
            input.maxLength = 20; 
            
            input.classList.add('win98-input'); 
            input.style.height = '14px';
            input.style.fontSize = '11px';
            input.style.padding = '0 2px';
            input.style.marginLeft = '2px';
            input.style.width = '100px';

            userStatusPanel.appendChild(input);
            input.focus();
            input.select();

            const saveName = () => {
                let newName = input.value.trim();
                if (!newName) newName = "Guest";
                localStorage.setItem('win98UserName', newName);
                userNameText.textContent = newName;
                userNameText.style.display = 'inline'; 
                if (input.parentNode) input.parentNode.removeChild(input); 
                statusText.textContent = `User name changed to ${newName}`;
            };

            input.addEventListener('blur', saveName);
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault(); 
                    saveName();
                } else if (e.key === 'Escape') {
                    userNameText.style.display = 'inline';
                    if (input.parentNode) input.parentNode.removeChild(input);
                    statusText.textContent = "User name change cancelled.";
                }
            });
        }

        if (userNameText) {
            userNameText.addEventListener('click', editUserName);
        }


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                 if (statusText) statusText.textContent = "Online. Fetching data...";
            } else {
                if (userNameText) userNameText.textContent = "Local Mode"; 
                if (statusText) statusText.textContent = "Offline - Using local data. Suggestion saving disabled.";
                // Fallback for local viewing if Firebase isn't fully set up or user is offline
                userId = 'local-user'; // Assign a placeholder userId for local operations if needed
            }
            loadUserName(); 
            fetchAndDisplayPosts(); 
        });
        
        document.getElementById('showSuggestToolFormBtn')?.addEventListener('click', () => { // Changed ID
            document.getElementById('suggestToolFormContainer').style.display = 'block'; // Changed ID
            statusText.textContent = "Suggest New Tool dialog opened.";
            if(document.getElementById('suggestToolForm') && document.getElementById('suggestToolForm').suggestToolName) { // Changed ID
                document.getElementById('suggestToolForm').suggestToolName.focus();
            }
            if (activeMenu) { 
                activeMenu.style.display = 'none';
                activeMenu.previousElementSibling.classList.remove('active');
                activeMenu = null;
            }
        });


        const closeSuggestToolForm = () => { // Renamed function
            document.getElementById('suggestToolFormContainer').style.display = 'none'; // Changed ID
            if(document.getElementById('suggestToolForm')) document.getElementById('suggestToolForm').reset(); // Changed ID
            statusText.textContent = "Ready";
        }
        document.getElementById('closeSuggestToolFormBtn')?.addEventListener('click', closeSuggestToolForm); // Changed ID
        document.getElementById('cancelSuggestToolBtn')?.addEventListener('click', closeSuggestToolForm); // Changed ID
        
        const closeAiDialog = () => {
            if(aiResponseDialog) aiResponseDialog.style.display = 'none';
            if(aiResponseDialogContent) aiResponseDialogContent.innerHTML = ''; 
            statusText.textContent = "Ready";
        }
        if(closeAiResponseDialogBtn) closeAiResponseDialogBtn.addEventListener('click', closeAiDialog);
        if(okAiResponseDialogBtn) okAiResponseDialogBtn.addEventListener('click', closeAiDialog);


        const suggestionsCollectionPath = `artifacts/${appId}/public/data/tool_suggestions`; // New collection path

        const suggestToolFormEl = document.getElementById('suggestToolForm'); // Changed ID
        if(suggestToolFormEl) {
            suggestToolFormEl.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (!userId || userId === 'local-user') {  // Check if not authenticated or in local mode
                    showGenericDialog("Suggestion Disabled", "<p>Tool suggestion is disabled in local/offline mode. Please deploy the site to enable this feature with Firebase.</p>");
                    return; 
                }
                const toolName = suggestToolFormEl.suggestToolName.value.trim();
                const toolLink = suggestToolFormEl.suggestToolLink.value.trim(); // Optional
                const reason = suggestToolFormEl.suggestReason.value.trim();

                if (!toolName || !reason) {
                    showGenericDialog("Input Error", "<p>Tool Name and Reason for Suggestion are required.</p>");
                    return;
                }
                
                statusText.textContent = "Submitting suggestion...";
                try {
                    await addDoc(collection(db, suggestionsCollectionPath), { 
                        toolName, 
                        toolLink: toolLink || '', // Store empty string if not provided
                        reason, 
                        suggestedAt: serverTimestamp(), 
                        suggesterId: userId,
                        status: 'pending' // For potential review workflow
                    });
                    statusText.textContent = "Suggestion submitted successfully! Thank you.";
                    showGenericDialog("Suggestion Submitted", "<p>Your tool suggestion has been received. Thank you!</p>");
                    closeSuggestToolForm();
                } catch (error) {
                    showError(`Error submitting suggestion: ${error.message}`);
                    statusText.textContent = "Error submitting suggestion.";
                    showGenericDialog("Submission Error", `<p>Could not submit your suggestion. ${error.message}</p>`);
                }
            });
        }
        
        const categoriesForForm = [ // Updated to reflect remaining main categories
            "Adblocking / Privacy", "Android / iOS", "Artificial Intelligence", 
            "Books / Comics / Manga", "Downloading", "Educational", "Gaming / Emulation", 
            "Linux / macOS", "Miscellaneous",
            "Movies / TV / Anime", "Music / Podcasts / Radio", 
            "Non-English", "Retro Computing / Abandonware", 
            "Torrenting"
        ];


        async function callGeminiAPI(prompt) {
            statusText.textContent = "✨ AI is thinking...";
            showAiResponseDialog("AI is Working...", "<p style='text-align:center; padding:20px;'><i>Please wait while the AI processes your request...</i></p>");

            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error("Gemini API Error:", errorData);
                    throw new Error(`API Error (${response.status}): ${errorData?.error?.message || 'Unknown error'}`);
                }
                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    statusText.textContent = "✨ AI has responded!";
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Unexpected Gemini API response structure:", result);
                    throw new Error("AI response format was unexpected.");
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                statusText.textContent = "Error with AI request.";
                showAiResponseDialog("AI Error", `<p style='color:red; padding:10px;'>Could not get a response from the AI. ${error.message}</p>`);
                return null; 
            }
        }

        function showAiResponseDialog(title, contentHtml) {
            if(aiResponseDialogTitle) aiResponseDialogTitle.textContent = title;
            if(aiResponseDialogContent) aiResponseDialogContent.innerHTML = contentHtml.replace(/\n/g, "<br>");
            if(aiResponseDialog) aiResponseDialog.style.display = 'block';
        }

        async function summarizeTool(toolName, toolDescription) {
            const prompt = `Please provide a concise, one-paragraph summary for the following software tool, suitable for a retro tech blog. Tool Name: "${toolName}". Description: "${toolDescription}"`;
            const summary = await callGeminiAPI(prompt);
            if (summary) {
                showAiResponseDialog(`✨ AI Summary: ${toolName}`, summary);
            }
        }

        async function getUsageIdeas(toolName, toolDescription) {
            const prompt = `List 3 to 5 potential usage ideas or interesting applications for the software tool named "${toolName}". The tool's description is: "${toolDescription}". Present the ideas as a bulleted or numbered list.`;
            const ideas = await callGeminiAPI(prompt);
            if (ideas) {
                showAiResponseDialog(`✨ Usage Ideas: ${toolName}`, ideas);
            }
        }

        async function fetchAndDisplayPosts(category = null, sortCriteria = currentSortCriteria, searchTerm = null) {
            // Removed the userId check that was causing the "User not authenticated" error for local viewing
            // Firebase dependent features like saving suggestions will still require live deployment.
            
            currentSortCriteria = sortCriteria; 
            currentSearchTerm = searchTerm ? searchTerm.toLowerCase() : null; 

            let queryConstraints = []; // This would be used for Firebase queries
            if (category) {
                currentCategoryFilter = category;
                // queryConstraints.push(where("category", "==", category)); // Firestore specific
                statusText.textContent = `Loading tools for: ${category}...`;
            } else {
                currentCategoryFilter = null;
                statusText.textContent = currentSearchTerm ? `Searching for "${searchTerm}"...` : "Fetching all tools...";
            }

            if (loadingMessage) loadingMessage.style.display = 'block';
            if (errorMessage) errorMessage.style.display = 'none';
            if (postsContainer) postsContainer.innerHTML = '';

            // Simulate fetching for local viewing by directly using defaultToolsData
            let postsArray = [];
            
            if (typeof firebase !== 'undefined' && auth.currentUser) { // Check if Firebase is available and user is logged in
                try {
                    const postsCollectionRef = collection(db, `artifacts/${appId}/public/data/tool_entries`); 
                    const q = query(postsCollectionRef, ...queryConstraints); // Apply category filter if set
                    const querySnapshot = await getDocs(q);
                    querySnapshot.forEach((doc) => {
                        postsArray.push({ id: doc.id, ...doc.data() });
                    });
                } catch(firebaseError) {
                    console.warn("Firebase fetch failed (expected in local mode or if not configured):", firebaseError);
                    // Continue to load default data if Firebase fails
                }
            }

            const currentPostToolNames = new Set(postsArray.map(p => p.toolName.toLowerCase()));
            let uniqueDefaultTools = defaultToolsData.filter(
                dp => !currentPostToolNames.has(dp.toolName.toLowerCase()) && 
                      (currentCategoryFilter === null || dp.category === currentCategoryFilter)
            );
            postsArray = [...uniqueDefaultTools, ...postsArray]; // Combine DB data (if any) with unique defaults

            if (currentSearchTerm) {
                postsArray = postsArray.filter(post => 
                    (post.title && post.title.toLowerCase().includes(currentSearchTerm)) ||
                    (post.toolName && post.toolName.toLowerCase().includes(currentSearchTerm)) ||
                    (post.content && post.content.toLowerCase().includes(currentSearchTerm))
                );
            }


            if (postsContainer) postsContainer.innerHTML = ''; 
            if (loadingMessage) loadingMessage.style.display = 'none';

            let headerHtml = '';
            if (currentSearchTerm) {
                headerHtml = `<h2>Search Results for "${searchTerm}"</h2><p>${postsArray.length} tool(s) found. ${currentCategoryFilter ? ` (in category: ${currentCategoryFilter})` : ''}</p><hr class='win98-hr'>`;
            } else if (currentCategoryFilter) {
                headerHtml = `<h2>${currentCategoryFilter}</h2><p>Showing tools for the selected category. Sorted by ${currentSortCriteria.field === 'createdAt' ? 'Date' : 'Title'} (${currentSortCriteria.direction === 'asc' ? 'Oldest/A-Z' : 'Newest/Z-A'}).</p><hr class='win98-hr'>`;
            } else {
                headerHtml = `<h2>All Tools</h2><p>Displaying all available tools. Sorted by ${currentSortCriteria.field === 'createdAt' ? 'Date' : 'Title'} (${currentSortCriteria.direction === 'asc' ? 'Oldest/A-Z' : 'Newest/Z-A'}).</p><hr class='win98-hr'>`;
            }
            if (postsContainer) postsContainer.insertAdjacentHTML('afterbegin', headerHtml);

            if (postsArray.length === 0) { 
                 if (postsContainer) {
                    const noPostsMsg = currentSearchTerm ? 
                        `<p style="padding:10px; text-align:center;">No tools found matching "${searchTerm}".</p>` :
                        (currentCategoryFilter ?
                        `<p style="padding:10px; text-align:center;">No tool entries found for "${currentCategoryFilter}".</p>` :
                        '<p style="padding:10px; text-align:center;">No tool entries found. Click "Suggest New Tool..." in the menu to add one.</p>');
                    postsContainer.innerHTML += noPostsMsg;
                }
                if (statusText) statusText.textContent = currentSearchTerm ? `No results for "${searchTerm}".` : (currentCategoryFilter ? `No tools in ${currentCategoryFilter}.` : "No entries found.");
                return;
            }


            postsArray.sort((a, b) => {
                let valA, valB;
                if (currentSortCriteria.field === 'createdAt') {
                    valA = a.createdAt ? a.createdAt.seconds : 0;
                    valB = b.createdAt ? b.createdAt.seconds : 0;
                } else if (currentSortCriteria.field === 'title') {
                    valA = a.title ? a.title.toLowerCase() : '';
                    valB = b.title ? b.title.toLowerCase() : '';
                }

                if (currentSortCriteria.direction === 'asc') {
                    return valA < valB ? -1 : valA > valB ? 1 : 0;
                } else { 
                    return valA > valB ? -1 : valA < valB ? 1 : 0;
                }
            });

            postsArray.forEach((post) => { 
                const postElement = document.createElement('article');
                postElement.classList.add('post-item', 'clearfix');
                const displayContent = post.content.replace(/</g, "<").replace(/>/g, ">").replace(/\n/g, "<br>");

                const date = post.createdAt ? new Date(post.createdAt.seconds * 1000).toLocaleDateString() : 'N/A';
                const summarizeBtnId = `summarizeBtn_${post.id || post.toolName.replace(/\s/g, '')}`; 
                const usageIdeasBtnId = `usageIdeasBtn_${post.id || post.toolName.replace(/\s/g, '')}`;

                postElement.innerHTML = `
                    ${post.toolImage ? `<img src="${post.toolImage}" alt="${post.toolName}" class="tool-image" onerror="this.onerror=null; this.src='https://placehold.co/80x60/C0C0C0/FF0000?text=IMG_ERR';">` : ''}
                    <h3><a href="${post.toolLink}" target="_blank" rel="noopener noreferrer" class="win98-link">${post.title}</a></h3>
                    <p class="post-meta">Tool: ${post.toolName} | By: ${post.author} | Posted: ${date} | Category: ${post.category || 'N/A'}</p>
                    <div class="post-content"><p>${displayContent}</p></div>
                    <a href="${post.toolLink}" target="_blank" rel="noopener noreferrer" class="win98-button small">Visit Tool Site</a>
                    <button id="${summarizeBtnId}" class="win98-button small">✨ Summarize</button>
                    <button id="${usageIdeasBtnId}" class="win98-button small">✨ Usage Ideas</button>
                `;
                if (postsContainer) postsContainer.appendChild(postElement);

                const summarizeButton = document.getElementById(summarizeBtnId);
                if (summarizeButton) summarizeButton.addEventListener('click', () => summarizeTool(post.toolName, post.content)); 
                const usageIdeasButton = document.getElementById(usageIdeasBtnId);
                if (usageIdeasButton) usageIdeasButton.addEventListener('click', () => getUsageIdeas(post.toolName, post.content)); 
            });
            if (statusText) statusText.textContent = `Loaded ${postsArray.length} entries. Ready.`;

        }
        
        const sidebarLinks = document.querySelectorAll('.win98-sidebar .sidebar-link');
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const categoryName = link.dataset.category || link.textContent.trim();
                document.getElementById('menuSearchInput').value = ''; 
                currentSearchTerm = null;
                fetchAndDisplayPosts(categoryName); 
                if(statusText) statusText.textContent = `Selected: ${categoryName}`;
            });
        });
        
        const sidebarHomeLink = document.getElementById('sidebarHomeLink');
        if (sidebarHomeLink) {
            sidebarHomeLink.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('menuSearchInput').value = ''; 
                currentSearchTerm = null;
                fetchAndDisplayPosts(null, { field: 'createdAt', direction: 'desc' }); 
                if(statusText) statusText.textContent = "Home - All Tools";
            });
        }

        const menuSearchInput = document.getElementById('menuSearchInput');
        if (menuSearchInput) {
            menuSearchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const searchTerm = menuSearchInput.value.trim();
                    if (searchTerm) {
                        fetchAndDisplayPosts(currentCategoryFilter, currentSortCriteria, searchTerm); 
                    } else {
                        fetchAndDisplayPosts(currentCategoryFilter, currentSortCriteria, null);
                    }
                }
            });
        }


        function showError(message) {
            if(errorMessage) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }
            if(loadingMessage) loadingMessage.style.display = 'none';
        }
        
        document.querySelectorAll('.menu-dropdown-item').forEach(item => {
            item.addEventListener('click', () => {
                if (activeMenu) {
                    activeMenu.style.display = 'none';
                    if (activeMenu.previousElementSibling) {
                         activeMenu.previousElementSibling.classList.remove('active');
                    }
                    activeMenu = null;
                }
            });
        });

        document.getElementById('menuPrintView')?.addEventListener('click', () => { window.print(); statusText.textContent = "Print dialog opened."; });
        document.getElementById('menuClearFilter')?.addEventListener('click', () => {
            document.getElementById('menuSearchInput').value = ''; 
            currentSearchTerm = null;
            fetchAndDisplayPosts(null, { field: 'createdAt', direction: 'desc' }); 
            statusText.textContent = "Filter cleared. Showing all tools.";
        });
        document.getElementById('menuExitApp')?.addEventListener('click', () => {
            showGenericDialog("Exit Application", "<p>Are you sure you want to exit BAnsMax Archive?</p><p>(This is a simulation, of course!)</p>");
        });
        document.getElementById('menuOpenPreferences')?.addEventListener('click', () => { 
            const desktopBgSelect = document.getElementById('desktopBgColorSelect');
            const windowSchemeSelect = document.getElementById('windowSchemeSelect');
            if(desktopBgSelect) desktopBgSelect.value = localStorage.getItem('desktopBgColor') || '#008080';
            if(windowSchemeSelect) windowSchemeSelect.value = localStorage.getItem('windowColorScheme') || 'win98-scheme-standard';
            
            document.getElementById('preferencesDialog').style.display = 'block';
            statusText.textContent = "Preferences dialog opened.";
        });

        document.getElementById('closePreferencesDialogBtn')?.addEventListener('click', () => {
            document.getElementById('preferencesDialog').style.display = 'none';
            statusText.textContent = "Ready";
        });
        document.getElementById('okPreferencesDialogBtn')?.addEventListener('click', () => {
            applyAndSavePreferences();
            document.getElementById('preferencesDialog').style.display = 'none';
            statusText.textContent = "Ready";
        });
        document.getElementById('applyPreferencesDialogBtn')?.addEventListener('click', applyAndSavePreferences);


        function applyAndSavePreferences() {
            const desktopBgColor = document.getElementById('desktopBgColorSelect').value;
            document.body.style.backgroundColor = desktopBgColor;
            localStorage.setItem('desktopBgColor', desktopBgColor);

            const windowScheme = document.getElementById('windowSchemeSelect').value;
            const allWindows = document.querySelectorAll('.win98-window'); 
            const schemeClasses = ['win98-scheme-standard', 'win98-scheme-marine', 'win98-scheme-olive', 'win98-scheme-spruce'];
            
            allWindows.forEach(win => {
                schemeClasses.forEach(cls => win.classList.remove(cls)); 
                if (windowScheme !== 'win98-scheme-standard') { 
                    win.classList.add(windowScheme);
                }
            });
            localStorage.setItem('windowColorScheme', windowScheme);
            statusText.textContent = "Preferences Applied.";
        }

        function loadPreferences() {
            const savedDesktopBg = localStorage.getItem('desktopBgColor');
            if (savedDesktopBg) {
                document.body.style.backgroundColor = savedDesktopBg;
            }
            const savedWindowScheme = localStorage.getItem('windowColorScheme');
            if (savedWindowScheme && savedWindowScheme !== 'win98-scheme-standard') {
                const allWindows = document.querySelectorAll('.win98-window');
                 const schemeClasses = ['win98-scheme-standard', 'win98-scheme-marine', 'win98-scheme-olive', 'win98-scheme-spruce'];
                allWindows.forEach(win => {
                    schemeClasses.forEach(cls => win.classList.remove(cls));
                    win.classList.add(savedWindowScheme);
                });
            }
        }
        loadPreferences(); 


        document.getElementById('menuSortDateDesc')?.addEventListener('click', () => fetchAndDisplayPosts(currentCategoryFilter, { field: 'createdAt', direction: 'desc' }, currentSearchTerm));
        document.getElementById('menuSortDateAsc')?.addEventListener('click', () => fetchAndDisplayPosts(currentCategoryFilter, { field: 'createdAt', direction: 'asc' }, currentSearchTerm));
        document.getElementById('menuSortTitleAsc')?.addEventListener('click', () => fetchAndDisplayPosts(currentCategoryFilter, { field: 'title', direction: 'asc' }, currentSearchTerm));
        document.getElementById('menuSortTitleDesc')?.addEventListener('click', () => fetchAndDisplayPosts(currentCategoryFilter, { field: 'title', direction: 'desc' }, currentSearchTerm));
        
        document.getElementById('menuRefreshView')?.addEventListener('click', () => {
            statusText.textContent = "Refreshing view...";
            fetchAndDisplayPosts(currentCategoryFilter, currentSortCriteria, currentSearchTerm);
        });
        document.getElementById('menuCheckUpdates')?.addEventListener('click', () => {
            showGenericDialog("Check for New Tools", "<p>You have the latest tool listings!</p><p>(Last checked: " + new Date().toLocaleTimeString() +")</p>");
        });
        document.getElementById('menuAbout')?.addEventListener('click', () => {
            const aboutContent = `
                <p style="text-align:center; font-weight:bold;">BAnsMax Archive</p>
                <p style="text-align:center;">Version 1.0</p> <hr class="win98-hr" style="margin: 10px 0;">
                <p>A fine collection of retro and useful tools.</p>
                <p>(c) ${new Date().getFullYear()} BAnsMax. All rights reserved (not really).</p>
            `;
            showGenericDialog("About BAnsMax Archive", aboutContent);
        });

        // Event listeners for Tools dropdown menu items - only "Check for New Tools" is handled here now.
        // The individual tool category links were removed from this dropdown.


        const closeMainWindowBtn = document.getElementById('closeMainWindowBtn');
        if(closeMainWindowBtn) {
            closeMainWindowBtn.addEventListener('click', () => {
                if(statusText) statusText.textContent = "This window cannot be closed in this demo.";
            });
        }

    </script>
</body>
</html>
